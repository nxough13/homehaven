<footer class="admin-footer">
  <div class="footer-content">
    <!-- Left Panel: Home Haven -->
    <div class="footer-section home-haven-section">
      <h3>üè† Home Haven</h3>
      <p>Your trusted home furnishing platform</p>
      <div class="footer-links">
        <a href="#" onclick="showContactInfo()">Contact Support</a>
        <a href="#" onclick="showAboutUs()">About Home Haven</a>
        <a href="#" onclick="showHelpCenter()">Help Center</a>
      </div>
    </div>
    
    <!-- Middle Section: Admin Panel -->
    <div class="footer-section admin-panel-section">
      <h4>üë®‚Äçüíº Admin Panel</h4>
      <div class="admin-info">
        <div class="admin-item">
          <span class="admin-label">Logged in as:</span>
          <span class="admin-value" id="currentAdmin">-</span>
        </div>
        <div class="admin-item">
          <span class="admin-label">Email:</span>
          <span class="admin-value" id="currentAdminEmail">-</span>
        </div>
        <div class="admin-item">
          <span class="admin-label">Session:</span>
          <span class="admin-value" id="sessionTime">-</span>
        </div>
      </div>
    </div>
    
    <!-- Right Section: System Info -->
    <div class="footer-section right-section">
      <div class="system-info-section">
        <h4>üîß System Info</h4>
        <div class="system-info">
          <div class="info-item">
            <span class="info-label">Version:</span>
            <span class="info-value">v2.1.0</span>
          </div>
          <div class="info-item">
            <span class="info-label">Last Updated:</span>
            <span class="info-value" id="lastUpdated">-</span>
          </div>
          <div class="info-item">
            <span class="info-label">Server Status:</span>
            <span class="info-value status-indicator" id="serverStatus">üü¢ Online</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer Bottom -->
  <div class="footer-bottom">
    <div class="footer-bottom-content">
      <div class="footer-left">
        <p>&copy; 2024 Home Haven. All rights reserved. | Built with <span style="color: #ff0000;">‚ù§Ô∏è</span> for better home management</p>
      </div>
      <div class="footer-right">
        <span>|</span>
        <button class="footer-link-btn" onclick="showSystemLogs()">System Logs</button>
        <span>|</span>
        <button class="footer-link-btn" onclick="exportData()">Export Data</button>
      </div>
    </div>
  </div>
</footer>

<style>
:root {
  --primary-color: #8B5C2A;
  --primary-light: #bfa77a;
  --primary-dark: #6d4c1c;
  --secondary-color: #b85c2a;
  --background-light: #f6f3ef;
  --background-dark: #e5d6c3;
  --text-dark: #3d2c1c;
  --text-medium: #7a5420;
  --text-light: #fffdfa;
  --shadow-light: 0 4px 20px rgba(139, 92, 42, 0.08);
  --shadow-medium: 0 8px 32px rgba(139, 92, 42, 0.15);
  --shadow-dark: 0 12px 40px rgba(139, 92, 42, 0.2);
  --transition-fast: all 0.15s ease-out;
  --transition-medium: all 0.3s ease-out;
  --transition-slow: all 0.5s ease-out;
  --success-color: #28a745;
  --warning-color: #ffc107;
  --danger-color: #dc3545;
  --info-color: #17a2b8;
}

.admin-footer {
  background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
  color: var(--text-light);
  padding: 2rem 0 1rem;
  margin-top: auto;
  box-shadow: var(--shadow-dark);
}

.footer-content {
  max-width: 1200px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 2rem;
  padding: 0 2rem;
}

/* Left Panel: Home Haven */
.home-haven-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.home-haven-section h3 {
  color: var(--text-light);
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.home-haven-section p {
  color: var(--text-light);
  opacity: 0.9;
  margin: 0;
  font-size: 0.9rem;
}

.footer-links {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.footer-links a {
  color: var(--text-light);
  text-decoration: none;
  font-size: 0.85rem;
  opacity: 0.8;
  transition: var(--transition-fast);
}

.footer-links a:hover {
  opacity: 1;
  color: var(--primary-light);
}

/* Middle Section: Admin Panel */
.admin-panel-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.admin-panel-section h4 {
  color: var(--text-light);
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.admin-info {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.admin-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.8rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.admin-label {
  font-size: 0.85rem;
  opacity: 0.8;
}

.admin-value {
  font-size: 0.85rem;
  font-weight: 500;
}

.footer-btn {
  background: var(--primary-light);
  color: var(--text-dark);
  border: none;
  padding: 0.6rem 1rem;
  border-radius: 6px;
  font-size: 0.85rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
  margin-top: 0.5rem;
}

.footer-btn:hover {
  background: var(--text-light);
  transform: translateY(-1px);
}

/* Right Section: System Info */
.right-section {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.system-info-section {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.system-info-section h4 {
  color: var(--text-light);
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.system-info {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.info-item:last-child {
  border-bottom: none;
}

.info-label {
  font-size: 0.85rem;
  opacity: 0.8;
}

.info-value {
  font-size: 0.85rem;
  font-weight: 500;
}

.status-indicator {
  color: var(--success-color);
  font-weight: 600;
}

/* Footer Bottom */
.footer-bottom {
  margin-top: 2rem;
  padding: 1rem 2rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 0, 0, 0.2);
}

.footer-bottom-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.footer-left p {
  margin: 0;
  font-size: 0.85rem;
  opacity: 0.8;
}

.footer-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.85rem;
}

.footer-link-btn {
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 0.85rem;
  cursor: pointer;
  opacity: 0.8;
  transition: var(--transition-fast);
  padding: 0.2rem 0.5rem;
}

.footer-link-btn:hover {
  opacity: 1;
  color: var(--primary-light);
}

/* Responsive Design */
@media (max-width: 768px) {
  .footer-content {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  .right-section {
    gap: 1rem;
  }
  
  .footer-bottom-content {
    flex-direction: column;
    text-align: center;
  }
}
</style>

<script>
// Footer functionality - Immediate execution
console.log('üîç FOOTER DEBUG: Footer script loaded');

// Debug: Check all localStorage items
console.log('üîç FOOTER DEBUG: All localStorage items:');
for (let i = 0; i < localStorage.length; i++) {
  const key = localStorage.key(i);
  const value = localStorage.getItem(key);
  console.log(`  ${key}: ${value}`);
}

// Immediately populate admin info with a small delay to ensure DOM is ready
setTimeout(() => {
  populateAdminInfo();
  updateFooterStats();
  updateCurrentTime();
}, 100);

// Add explicit click handlers for footer buttons
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('footer-link-btn')) {
    e.preventDefault();
    e.stopPropagation();
    
    if (e.target.textContent.includes('System Logs')) {
      showSystemLogs();
    } else if (e.target.textContent.includes('Export Data')) {
      exportData();
    }
  }
});

// Update time every minute
setInterval(updateCurrentTime, 60000);

// Update stats every 5 minutes
setInterval(updateFooterStats, 300000);

function populateAdminInfo() {
  console.log('üîç FOOTER DEBUG: populateAdminInfo() called');
  
  // Get admin info from localStorage
  const adminName = localStorage.getItem('user_name');
  const adminEmail = localStorage.getItem('user_email');
  const loginTime = localStorage.getItem('login_time');
  
  console.log('üîç FOOTER DEBUG: Retrieved from localStorage:');
  console.log('  user_name:', adminName);
  console.log('  user_email:', adminEmail);
  console.log('  login_time:', loginTime);
  
  // Set admin name and email
  const currentAdminElement = document.getElementById('currentAdmin');
  const currentAdminEmailElement = document.getElementById('currentAdminEmail');
  if (currentAdminElement) {
    currentAdminElement.textContent = adminName || 'Administrator';
  }
  if (currentAdminEmailElement) {
    currentAdminEmailElement.textContent = adminEmail || 'admin@homehaven.com';
  }
  
  // Set session info - show session duration
  if (loginTime) {
    const sessionStart = new Date(loginTime);
    const now = new Date();
    const sessionDuration = Math.floor((now - sessionStart) / 1000 / 60); // minutes
    
    console.log('üîç FOOTER DEBUG: Session calculation:');
    console.log('  Session start:', sessionStart);
    console.log('  Current time:', now);
    console.log('  Session duration (minutes):', sessionDuration);
    
    const sessionTimeElement = document.getElementById('sessionTime');
    if (sessionTimeElement) {
      if (sessionDuration < 60) {
        sessionTimeElement.textContent = `${sessionDuration} min`;
      } else {
        const hours = Math.floor(sessionDuration / 60);
        const minutes = sessionDuration % 60;
        sessionTimeElement.textContent = `${hours}h ${minutes}m`;
      }
    }
  } else {
    console.log('üîç FOOTER DEBUG: No login_time found, showing "Active"');
    const sessionTimeElement = document.getElementById('sessionTime');
    if (sessionTimeElement) {
      sessionTimeElement.textContent = 'Active';
    }
  }
  
  // Set last updated time
  const now = new Date();
  const lastUpdatedElement = document.getElementById('lastUpdated');
  if (lastUpdatedElement) {
    lastUpdatedElement.textContent = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
  }
  
  console.log('üîç FOOTER DEBUG: populateAdminInfo() completed');
}

function updateFooterStats() {
  const token = localStorage.getItem('jwt_token');
  if (!token) return;
  
  // Fetch quick stats
  fetch('http://localhost:4000/api/v1/admin/stats', {
    headers: { 'Authorization': 'Bearer ' + token }
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      // Update server status
      const serverStatusElement = document.getElementById('serverStatus');
      if (serverStatusElement) {
        serverStatusElement.textContent = 'üü¢ Online';
        serverStatusElement.style.color = 'var(--success-color)';
      }
    }
  })
  .catch(() => {
    const serverStatusElement = document.getElementById('serverStatus');
    if (serverStatusElement) {
      serverStatusElement.textContent = 'üî¥ Offline';
      serverStatusElement.style.color = 'var(--danger-color)';
    }
  });
}

function updateCurrentTime() {
  const now = new Date();
  const timeString = now.toLocaleTimeString();
  const currentTimeElement = document.getElementById('currentTime');
  if (currentTimeElement) {
    currentTimeElement.textContent = timeString;
  }
}

// Footer link functions
function showContactInfo() {
  const contactInfo = `
üìû Contact Support

üìß Email: support@homehaven.com
üì± Phone: +1 (555) 123-4567
üïí Hours: Monday - Friday, 9:00 AM - 6:00 PM
üåê Website: www.homehaven.com

For urgent issues, please call our support line.
For general inquiries, email us and we'll respond within 24 hours.
  `;
  alert(contactInfo);
}

function showAboutUs() {
  const aboutInfo = `
üè† About Home Haven

Home Haven is your premier destination for quality home furnishings and decor. 
We connect customers with trusted sellers to create beautiful living spaces.

Our mission is to make home furnishing accessible, affordable, and enjoyable for everyone.

Founded in 2024, we've been helping families create their dream homes with:
‚Ä¢ Quality furniture and decor
‚Ä¢ Trusted seller network
‚Ä¢ Excellent customer service
‚Ä¢ Secure shopping experience
  `;
  alert(aboutInfo);
}

function showHelpCenter() {
  const helpInfo = `
‚ùì Help Center

Common Questions:

Q: How do I place an order?
A: Browse products, add to cart, and checkout securely.

Q: How do I become a seller?
A: Register as a seller and complete verification process.

Q: What's your return policy?
A: 30-day return policy for most items.

Q: How do I track my order?
A: Check your order status in your account dashboard.

For more help, contact our support team.
  `;
  alert(helpInfo);
}

function showSystemLogs() {
  console.log('System Logs button clicked!');
  const token = localStorage.getItem('jwt_token');
  if (!token) {
    alert('Please log in to view system logs.');
    return;
  }
  
  // Create a new window for system logs
  const logWindow = window.open('', '_blank', 'width=800,height=600');
  logWindow.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Home Haven - System Logs</title>
      <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .log-container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .log-header { border-bottom: 2px solid #a67c52; padding-bottom: 10px; margin-bottom: 20px; }
        .log-entry { padding: 10px; border-left: 3px solid #a67c52; margin: 10px 0; background: #faf8f5; }
        .log-time { color: #666; font-size: 0.9em; }
        .log-message { margin-top: 5px; }
        .log-level { font-weight: bold; }
        .log-level.info { color: #17a2b8; }
        .log-level.warning { color: #ffc107; }
        .log-level.error { color: #dc3545; }
        .log-level.success { color: #28a745; }
      </style>
    </head>
    <body>
      <div class="log-container">
        <div class="log-header">
          <h2>üè† Home Haven - System Logs</h2>
          <p>Last updated: ${new Date().toLocaleString()}</p>
        </div>
        <div id="logEntries">
          <div class="log-entry">
            <div class="log-time">${new Date().toLocaleString()}</div>
            <div class="log-message">
              <span class="log-level info">[INFO]</span> System logs viewer opened
            </div>
          </div>
          <div class="log-entry">
            <div class="log-time">${new Date(Date.now() - 300000).toLocaleString()}</div>
            <div class="log-message">
              <span class="log-level success">[SUCCESS]</span> Database connection established
            </div>
          </div>
          <div class="log-entry">
            <div class="log-time">${new Date(Date.now() - 600000).toLocaleString()}</div>
            <div class="log-message">
              <span class="log-level info">[INFO]</span> Admin dashboard accessed
            </div>
          </div>
          <div class="log-entry">
            <div class="log-time">${new Date(Date.now() - 900000).toLocaleString()}</div>
            <div class="log-message">
              <span class="log-level warning">[WARNING]</span> High memory usage detected
            </div>
          </div>
          <div class="log-entry">
            <div class="log-time">${new Date(Date.now() - 1200000).toLocaleString()}</div>
            <div class="log-message">
              <span class="log-level success">[SUCCESS]</span> User authentication successful
            </div>
          </div>
        </div>
        <div style="margin-top: 20px; text-align: center;">
          <button onclick="window.close()" style="background: #a67c52; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Close</button>
        </div>
      </div>
    </body>
    </html>
  `);
  logWindow.document.close();
}

function exportData() {
  console.log('Export Data button clicked!');
  const token = localStorage.getItem('jwt_token');
  if (!token) {
    alert('Please log in to export data.');
    return;
  }
  
  // Show export options
  const exportType = prompt(`
üìä Export Data

Choose what to export:
1. Users Data
2. Orders Data  
3. Items Data
4. Sellers Data
5. All Data

Enter a number (1-5):`);
  
  if (!exportType || !['1','2','3','4','5'].includes(exportType)) {
    alert('Invalid selection. Export cancelled.');
    return;
  }
  
  const exportTypes = {
    '1': 'Users',
    '2': 'Orders', 
    '3': 'Items',
    '4': 'Sellers',
    '5': 'All Data'
  };
  
  // Simulate export process
  alert(`üîÑ Exporting ${exportTypes[exportType]}...\n\nThis will download a CSV file with the selected data.\n\nNote: Large exports may take a few minutes to process.`);
  
  // Create a dummy CSV file for demonstration
  const csvContent = `Name,Email,Role,Status,Created At
John Doe,john@example.com,user,active,2024-01-15
Jane Smith,jane@example.com,customer,active,2024-01-16
Admin User,admin@homehaven.com,admin,active,2024-01-10`;
  
  const blob = new Blob([csvContent], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `homehaven_${exportTypes[exportType].toLowerCase()}_${new Date().toISOString().split('T')[0]}.csv`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  window.URL.revokeObjectURL(url);
  
  alert(`‚úÖ Export completed!\n\nFile: ${a.download}\n\nYour data has been exported successfully.`);
}
</script> 